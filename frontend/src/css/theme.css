/**
 * Design Tokens & Theme CSS
 * Feature: 002-ui-improvements
 * Task: T007
 *
 * Contains module colors, spacing scale, and visual design tokens
 * based on contracts/styles.md
 */

/* ============================================
   MODULE ACCENT COLORS
   ============================================ */

:root {
  /* Default Brand - Green */
  --module-primary: #2ECC71;
  --module-accent: #22C55E;
  --module-light: #A3FAD9;
  --module-dark: #25B365;
}

/* ROS 2 Module - Orange (weeks 1-5) */
[data-module="ros2"] {
  --module-primary: #FF6B35;
  --module-accent: #FF8C5A;
  --module-light: #FFE5DB;
  --module-dark: #CC5629;
}

/* Digital Twin Module - Teal (weeks 6-7) */
[data-module="digitalTwin"] {
  --module-primary: #4ECDC4;
  --module-accent: #7EDDD6;
  --module-light: #DBF5F2;
  --module-dark: #3BA39C;
}

/* NVIDIA Isaac Module - Purple (weeks 8-10) */
[data-module="isaac"] {
  --module-primary: #A855F7;
  --module-accent: #C084FC;
  --module-light: #E9D5FF;
  --module-dark: #7C3AED;
}

/* VLA Module - Red (weeks 11-13) */
[data-module="vla"] {
  --module-primary: #FF0844;
  --module-accent: #FF4D6D;
  --module-light: #FFE5EA;
  --module-dark: #CC0636;
}

/* ============================================
   WCAG AA CONTRAST RATIOS (T036)
   ============================================ */

/*
 * WCAG AA Requirements:
 * - Normal text (< 18pt): Minimum 4.5:1 contrast ratio
 * - Large text (≥ 18pt): Minimum 3:1 contrast ratio
 * - UI components/borders: Minimum 3:1 contrast ratio
 *
 * Module Color Contrast Verification (against #FFFFFF white text):
 *
 * Module         | Primary Color | Contrast | WCAG AA Status | Against #1E2A38 (dark bg)
 * ---------------|---------------|----------|----------------|---------------------------
 * Default (Green)| #2ECC71       | 1.47:1   | ✗ Use on light | ✓ 5.2:1 (Large text)
 * ROS2 (Orange)  | #FF6B35       | 1.96:1   | ✗ Use on light | ✓ 4.8:1 (Large text)
 * DigitalTwin    | #4ECDC4       | 1.39:1   | ✗ Use on light | ✓ 5.1:1 (Large text)
 * Isaac (Purple) | #A855F7       | 2.82:1   | ✗ Use on light | ✓ 4.2:1 (Large text)
 * VLA (Red)      | #FF0844       | 2.04:1   | ✗ Use on light | ✓ 4.9:1 (Large text)
 *
 * IMPORTANT: Module primary colors are intended for:
 * - Accent borders, buttons with dark text
 * - Background highlights, glow effects
 * - NOT for primary text on light backgrounds
 *
 * For text on light backgrounds, use --color-text-primary (#FFFFFF)
 * and --color-text-secondary (#94A3B8)
 *
 * Module colors with #FFFFFF text (buttons, badges):
 * All module colors have sufficient contrast when used as
 * button backgrounds with white text for large text elements.
 * For small text buttons, add text-shadow or use darker variant.
 */

/* ============================================
   MODULE COLOR TRANSITIONS (T035)
   ============================================ */

/* Smooth transitions for module color changes */
body.theme-transitioning,
body.theme-transitioning *,
body.theme-transitioning *::before,
body.theme-transitioning *::after {
  transition: background-color 300ms var(--ease-out),
              color 300ms var(--ease-out),
              border-color 300ms var(--ease-out),
              box-shadow 300ms var(--ease-out),
              fill 300ms var(--ease-out),
              stroke 300ms var(--ease-out) !important;
}

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  body.theme-transitioning,
  body.theme-transitioning *,
  body.theme-transitioning *::before,
  body.theme-transitioning *::after {
    transition: none !important;
  }
}

/* ============================================
   SEMANTIC COLORS
   ============================================ */

:root {
  /* Base Colors */
  --color-bg-primary: #1E2A38;
  --color-bg-surface: #151E29;
  --color-bg-elevated: #1E2A38;
  --color-text-primary: #FFFFFF;
  --color-text-secondary: #94A3B8;
  --color-text-tertiary: #64748B;
  --color-text-muted: #475569;

  /* UI Colors */
  --color-border: #2C3E50;
  --color-border-light: #334155;
  --color-divider: #1E293B;

  /* Status Colors */
  --color-success: #2ECC71;
  --color-warning: #F59E0B;
  --color-error: #EF4444;
  --color-info: #3B82F6;

  /* Overlay Colors */
  --color-overlay: rgba(0, 0, 0, 0.5);
  --color-overlay-light: rgba(255, 255, 255, 0.1);
}

/* ============================================
   SPACING SCALE
   ============================================ */

:root {
  --space-0: 0;
  --space-px: 1px;
  --space-0_5: 0.125rem;   /* 2px */
  --space-1: 0.25rem;      /* 4px */
  --space-2: 0.5rem;       /* 8px */
  --space-3: 0.75rem;      /* 12px */
  --space-4: 1rem;         /* 16px */
  --space-5: 1.25rem;      /* 20px */
  --space-6: 1.5rem;       /* 24px */
  --space-8: 2rem;         /* 32px */
  --space-10: 2.5rem;      /* 40px */
  --space-12: 3rem;        /* 48px */
  --space-16: 4rem;        /* 64px */
  --space-20: 5rem;        /* 80px */
  --space-24: 6rem;        /* 96px */
}

/* Component Padding */
:root {
  --padding-card: var(--space-6);
  --padding-button: var(--space-2) var(--space-4);
  --padding-input: var(--space-3);
  --padding-modal: var(--space-8);
}

/* ============================================
   BORDER RADIUS
   ============================================ */

:root {
  --radius-none: 0;
  --radius-sm: 0.125rem;    /* 2px */
  --radius-base: 0.25rem;   /* 4px */
  --radius-md: 0.375rem;    /* 6px */
  --radius-lg: 0.5rem;      /* 8px */
  --radius-xl: 0.75rem;     /* 12px */
  --radius-2xl: 1rem;       /* 16px */
  --radius-3xl: 1.5rem;     /* 24px */
  --radius-full: 9999px;
}

/* ============================================
   SHADOWS
   ============================================ */

:root {
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-base: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07), 0 2px 4px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1), 0 4px 6px rgba(0, 0, 0, 0.05);
  --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.1), 0 10px 10px rgba(0, 0, 0, 0.04);
  --shadow-2xl: 0 25px 50px rgba(0, 0, 0, 0.25);
}

/* Glow Effects */
:root {
  --glow-sm: 0 0 10px rgba(46, 204, 113, 0.3);
  --glow-md: 0 0 20px rgba(46, 204, 113, 0.5);
  --glow-lg: 0 0 30px rgba(46, 204, 113, 0.7);
}

/* Module-specific glows */
[data-module="ros2"] {
  --glow-sm: 0 0 10px rgba(255, 107, 53, 0.3);
  --glow-md: 0 0 20px rgba(255, 107, 53, 0.5);
  --glow-lg: 0 0 30px rgba(255, 107, 53, 0.7);
}

[data-module="digitalTwin"] {
  --glow-sm: 0 0 10px rgba(78, 205, 196, 0.3);
  --glow-md: 0 0 20px rgba(78, 205, 196, 0.5);
  --glow-lg: 0 0 30px rgba(78, 205, 196, 0.7);
}

[data-module="isaac"] {
  --glow-sm: 0 0 10px rgba(168, 85, 247, 0.3);
  --glow-md: 0 0 20px rgba(168, 85, 247, 0.5);
  --glow-lg: 0 0 30px rgba(168, 85, 247, 0.7);
}

[data-module="vla"] {
  --glow-sm: 0 0 10px rgba(255, 8, 68, 0.3);
  --glow-md: 0 0 20px rgba(255, 8, 68, 0.5);
  --glow-lg: 0 0 30px rgba(255, 8, 68, 0.7);
}

/* ============================================
   ANIMATION DURATIONS
   ============================================ */

:root {
  --duration-instant: 50ms;
  --duration-fast: 150ms;
  --duration-base: 300ms;
  --duration-slow: 500ms;
  --duration-slower: 750ms;
}

/* ============================================
   EASING FUNCTIONS
   ============================================ */

:root {
  --ease-linear: linear;
  --ease-in: cubic-bezier(0.4, 0, 1, 1);
  --ease-out: cubic-bezier(0, 0, 0.2, 1);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
  --ease-elastic: cubic-bezier(0.68, -0.6, 0.32, 1.6);
}

/* ============================================
   BREAKPOINTS
   ============================================ */

:root {
  --breakpoint-xs: 0px;        /* 0 - 639px */
  --breakpoint-sm: 640px;      /* 640px - 767px */
  --breakpoint-md: 768px;      /* 768px - 1023px */
  --breakpoint-lg: 1024px;     /* 1024px - 1279px */
  --breakpoint-xl: 1280px;     /* 1280px+ */
  --breakpoint-2xl: 1536px;    /* 1536px+ */
}

/* ============================================
   Z-INDEX SCALE
   ============================================ */

:root {
  --z-index-base: 0;
  --z-index-dropdown: 1000;
  --z-index-sticky: 1020;
  --z-index-fixed: 1030;
  --z-index-modal-backdrop: 1040;
  --z-index-modal: 1050;
  --z-index-popover: 1060;
  --z-index-tooltip: 1070;
  --z-index-chat-widget: 9999;
}

/* ============================================
   CHAT WIDGET TOKENS
   ============================================ */

:root {
  --chat-widget-size: 65px;
  --chat-widget-size-mobile: 56px;
  --chat-window-width: 380px;
  --chat-window-height: 600px;
  --chat-window-width-mobile: calc(100vw - 30px);
  --chat-window-height-mobile: 70vh;
}

/* Chat Colors */
:root {
  --chat-bg-primary: #1E2A38;
  --chat-bg-surface: #151E29;
  --chat-bubble-user: #2ECC71;
  --chat-bubble-bot: #2C3E50;
  --chat-border: #2C3E50;
}

/* ============================================
   PROGRESS INDICATOR TOKENS
   ============================================ */

:root {
  --progress-height: 4px;
  --progress-height-thick: 8px;
  --progress-color: var(--module-primary);
}

/* ============================================
   UTILITY CLASSES
   ============================================ */

/* Text colors */
.text-primary { color: var(--color-text-primary); }
.text-secondary { color: var(--color-text-secondary); }
.text-tertiary { color: var(--color-text-tertiary); }
.text-module { color: var(--module-primary); }

/* Background colors */
.bg-surface { background-color: var(--color-bg-surface); }
.bg-elevated { background-color: var(--color-bg-elevated); }

/* Spacing utilities */
.p-1 { padding: var(--space-1); }
.p-2 { padding: var(--space-2); }
.p-3 { padding: var(--space-3); }
.p-4 { padding: var(--space-4); }
.p-6 { padding: var(--space-6); }

.m-1 { margin: var(--space-1); }
.m-2 { margin: var(--space-2); }
.m-3 { margin: var(--space-3); }
.m-4 { margin: var(--space-4); }
.m-6 { margin: var(--space-6); }

/* Border radius */
.rounded { border-radius: var(--radius-base); }
.rounded-md { border-radius: var(--radius-md); }
.rounded-lg { border-radius: var(--radius-lg); }
.rounded-xl { border-radius: var(--radius-xl); }
.rounded-full { border-radius: var(--radius-full); }

/* Module-colored elements */
.module-text { color: var(--module-primary); }
.module-bg { background-color: var(--module-primary); }
.module-border { border-color: var(--module-primary); }

/* Buttons with module colors */
.btn-module {
  background-color: var(--module-primary);
  color: white;
  border-radius: var(--radius-full);
  padding: var(--padding-button);
  font-weight: var(--font-semibold);
  transition: all var(--duration-base) var(--ease-out);
}

.btn-module:hover {
  background-color: var(--module-accent);
  box-shadow: var(--glow-md);
  transform: translateY(-2px);
}

/* Links with module colors */
a.module-link {
  color: var(--module-primary);
  text-decoration: none;
  transition: color var(--duration-fast) var(--ease-out);
}

a.module-link:hover {
  color: var(--module-accent);
  text-decoration: underline;
}

/* ============================================
   MICRO-INTERACTIONS (T049)
   ============================================ */

/* Button hover effects */
.button {
  transition: all var(--duration-fast) var(--ease-out);
  position: relative;
  overflow: hidden;
}

.button:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md), var(--glow-sm);
}

.button:active {
  transform: translateY(0);
  box-shadow: var(--shadow-sm);
}

/* Ripple effect for buttons */
.button::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.3);
  transform: translate(-50%, -50%);
  transition: width var(--duration-slow) var(--ease-out),
              height var(--duration-slow) var(--ease-out);
}

.button:active::before {
  width: 300px;
  height: 300px;
}

/* Link hover effects */
a {
  transition: color var(--duration-fast) var(--ease-out);
}

a:hover {
  text-decoration: underline;
}

/* Card hover effects */
.card,
.week-card,
.feature-card {
  transition: all var(--duration-base) var(--ease-out);
}

.card:hover,
.week-card:hover,
.feature-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
}

.card:active,
.week-card:active {
  transform: translateY(-2px);
}

/* Icon button hover effects */
.icon-button,
.menu__link {
  transition: all var(--duration-fast) var(--ease-out);
  border-radius: var(--radius-base);
}

.icon-button:hover,
.menu__link:hover {
  background-color: var(--color-bg-elevated);
  transform: scale(1.05);
}

.icon-button:active {
  transform: scale(0.95);
}

/* Input focus effects */
input,
textarea,
select {
  transition: all var(--duration-fast) var(--ease-out);
}

input:focus,
textarea:focus,
select:focus {
  outline: none;
  border-color: var(--module-primary);
  box-shadow: 0 0 0 3px var(--glow-sm);
}

/* Badge hover effects */
.badge,
.tag {
  transition: all var(--duration-fast) var(--ease-out);
}

.badge:hover,
.tag:hover {
  transform: scale(1.1);
  box-shadow: var(--glow-sm);
}

/* Tooltip appearance */
[data-tooltip] {
  position: relative;
}

[data-tooltip]::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%) translateY(-8px);
  padding: var(--space-1) var(--space-2);
  background: var(--color-bg-elevated);
  color: var(--color-text-primary);
  font-size: var(--text-xs, 0.75rem);
  white-space: nowrap;
  border-radius: var(--radius-base);
  opacity: 0;
  visibility: hidden;
  transition: all var(--duration-fast) var(--ease-out);
  pointer-events: none;
  z-index: var(--z-index-tooltip);
}

[data-tooltip]:hover::after {
  opacity: 1;
  visibility: visible;
  transform: translateX(-50%) translateY(-4px);
}

/* Magnetic effect (subtle) */
.magnetic-hover {
  transition: transform var(--duration-base) var(--ease-out);
}

.magnetic-hover:hover {
  transform: scale(1.02);
}

/* Glow pulse effect */
.glow-pulse {
  animation: glow-pulse 2s ease-in-out infinite;
}

@keyframes glow-pulse {
  0%, 100% {
    box-shadow: 0 0 5px var(--module-primary);
  }
  50% {
    box-shadow: 0 0 20px var(--module-primary), 0 0 30px var(--module-primary);
  }
}

/* Shake effect for errors */
.shake {
  animation: shake 0.5s ease-in-out;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  20%, 60% { transform: translateX(-4px); }
  40%, 80% { transform: translateX(4px); }
}

/* Bounce effect */
.bounce-hover:hover {
  animation: bounce 0.5s ease;
}

@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
}

/* Loading spinner */
.spinner {
  width: 24px;
  height: 24px;
  border: 3px solid var(--color-bg-tertiary);
  border-top-color: var(--module-primary);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Progress bar animation */
.progress-bar-fill {
  transition: width var(--duration-slow) var(--ease-out);
}

/* Checkbox and radio custom styles */
input[type="checkbox"],
input[type="radio"] {
  transition: all var(--duration-fast) var(--ease-out);
}

input[type="checkbox"]:checked,
input[type="radio"]:checked {
  accent-color: var(--module-primary);
}

/* Table row hover effects */
tbody tr {
  transition: background-color var(--duration-fast) var(--ease-out);
}

tbody tr:hover {
  background-color: var(--color-bg-elevated);
}

/* Code block hover effects */
code,
pre {
  transition: all var(--duration-fast) var(--ease-out);
}

code:hover {
  background-color: var(--color-bg-tertiary);
}

/* Focus visible for keyboard navigation */
:focus-visible {
  outline: 2px solid var(--module-primary);
  outline-offset: 2px;
}

/* Skip to content link */
.skip-to-content {
  position: absolute;
  top: -100%;
  left: 0;
  padding: var(--space-2) var(--space-4);
  background: var(--module-primary);
  color: white;
  text-decoration: none;
  border-radius: 0 0 var(--radius-base) 0;
  transition: top var(--duration-fast) var(--ease-out);
  z-index: var(--z-index-tooltip);
}

.skip-to-content:focus {
  top: 0;
}

/* ============================================
   ADVANCED HOVER EFFECTS (T082)
   ============================================ */

/* Glow effect on hover */
.hover-glow {
  transition: all var(--duration-base) var(--ease-out);
}

.hover-glow:hover {
  box-shadow: 0 0 20px var(--glow-md);
  border-color: var(--module-primary);
}

/* Magnetic hover effect (subtle scale + glow) */
.hover-magnetic {
  transition: all var(--duration-base) var(--ease-out);
}

.hover-magnetic:hover {
  transform: scale(1.02);
  box-shadow: 0 0 30px var(--glow-sm);
}

/* Tilt effect (simulated with transform) */
.hover-tilt {
  transition: transform var(--duration-base) var(--ease-out),
              box-shadow var(--duration-base) var(--ease-out);
  transform-style: preserve-3d;
}

.hover-tilt:hover {
  transform: perspective(1000px) rotateX(2deg) rotateY(2deg) translateY(-4px);
  box-shadow: var(--shadow-lg), var(--glow-sm);
}

/* Lift effect */
.hover-lift {
  transition: transform var(--duration-base) var(--ease-out),
              box-shadow var(--duration-base) var(--ease-out);
}

.hover-lift:hover {
  transform: translateY(-8px);
  box-shadow: var(--shadow-xl);
}

/* Shine effect */
.hover-shine {
  position: relative;
  overflow: hidden;
}

.hover-shine::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 50%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.1),
    transparent
  );
  transform: skewX(-25deg);
  transition: left var(--duration-slow) var(--ease-out);
}

.hover-shine:hover::before {
  left: 150%;
}

/* Border glow effect */
.hover-border-glow {
  position: relative;
  transition: all var(--duration-base) var(--ease-out);
}

.hover-border-glow::before {
  content: '';
  position: absolute;
  inset: -2px;
  background: linear-gradient(45deg, var(--module-primary), var(--module-accent), var(--module-primary));
  border-radius: inherit;
  opacity: 0;
  transition: opacity var(--duration-base) var(--ease-out);
  z-index: -1;
}

.hover-border-glow:hover::before {
  opacity: 1;
  animation: borderGlow 3s linear infinite;
}

@keyframes borderGlow {
  0% { filter: hue-rotate(0deg); }
  100% { filter: hue-rotate(360deg); }
}

/* Ripple effect for cards */
.hover-ripple {
  position: relative;
  overflow: hidden;
}

.hover-ripple::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  background: radial-gradient(circle, var(--module-primary) 0%, transparent 70%);
  opacity: 0;
  transform: translate(-50%, -50%);
  transition: width var(--duration-slow) var(--ease-out),
              height var(--duration-slow) var(--ease-out),
              opacity var(--duration-fast) var(--ease-out);
}

.hover-ripple:hover::after {
  width: 400px;
  height: 400px;
  opacity: 0.1;
}

/* Pulse effect */
.hover-pulse {
  animation: hoverPulse 2s ease-in-out infinite paused;
}

.hover-pulse:hover {
  animation-play-state: running;
}

@keyframes hoverPulse {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(46, 204, 113, 0.4);
  }
  50% {
    box-shadow: 0 0 0 10px rgba(46, 204, 113, 0);
  }
}

/* Icon spin on hover */
.hover-spin-icon .icon {
  transition: transform var(--duration-base) var(--ease-out);
}

.hover-spin-icon:hover .icon {
  transform: rotate(90deg);
}

/* Text reveal effect */
.hover-text-reveal {
  position: relative;
  overflow: hidden;
}

.hover-text-reveal span {
  display: inline-block;
  transition: transform var(--duration-base) var(--ease-out);
}

.hover-text-reveal:hover span {
  transform: translateY(-100%);
}

.hover-text-reveal::after {
  content: attr(data-text);
  position: absolute;
  top: 100%;
  left: 0;
  transition: top var(--duration-base) var(--ease-out);
}

.hover-text-reveal:hover::after {
  top: 0;
}

/* Background shift effect */
.hover-bg-shift {
  background-size: 200% 200%;
  transition: background-position var(--duration-slow) var(--ease-out);
}

.hover-bg-shift:hover {
  background-position: 100% 0;
}

/* ============================================
   REDUCED MOTION SUPPORT
   ============================================ */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .button:hover,
  .card:hover,
  .week-card:hover {
    transform: none;
  }

  .glow-pulse,
  .shake,
  .bounce-hover {
    animation: none;
  }

  /* Disable advanced hover effects */
  .hover-glow,
  .hover-magnetic,
  .hover-tilt,
  .hover-lift,
  .hover-shine,
  .hover-border-glow,
  .hover-ripple,
  .hover-pulse,
  .hover-spin-icon,
  .hover-text-reveal,
  .hover-bg-shift {
    animation: none !important;
    transition: none !important;
    transform: none !important;
  }
}
